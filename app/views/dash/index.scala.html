@(form:play.data.Form[models.domain.model.boxes.formvalue.BoxCreation])(boxes:models.domain.model.boxes.BoxList)

@main(title = "メイン") {

	<div class="container-fluid">
		<div class="row-fluid" style="text-align: center;">
		
			<h1 class="span4 offset4">メイン</h1>
			
		</div>
	</div>
	
	<div class="container-fluid">
	
		<div class="row-fluid">
			
			<div class="span4 offset4">
			
				@if(form.hasErrors) {
					@for(entry <- form.errors.entrySet){
						@for(validationError <- entry.getValue){
						<div class="alert alert-error">
							<button type="button" class="close" data-dismiss="alert">&times;</button>
							@validationError.key : @Messages(validationError.message, validationError.arguments)
						</div>
						}
					}
				}
			
				<form method="POST" action="/boxes/registry" enctype="application/x-www-form-urlencoded">
					<fieldset>
					
						<label>ボックス名</label>
						<input id="boxName" class="input-block-level"
							type="text" name="boxName" value="@form.value().get().boxName" />
						
						<div style="text-align: center;"><button type="submit" class="btn btn-success btn-large" >作成</button></div>
					</fieldset>
				</form>
			</div>
		</div>
	
		<div class="row-fluid">
		
			@for(box <- boxes.iterator()){
			<div class="well">
				<label>@box.getBoxName()</label>
				<form class="form-inline" method="POST" action="/cards/registry" enctype="application/x-www-form-urlencoded">
					<input type="hidden" name="boxId" value="@box.getIdentifier()" />
					<input type="text"   name="front"  value="" placeholder="やること" />
					<input type="text"   name="back"   value="" placeholder="完了条件" />
					<input type="text"   name="points" value="" placeholder="ポイント" />
					<button type="submit" class="btn btn-success">登録</button>
				</form>
				@if(!box.isEmpty()){
				<table class="table table-striped">
					<thead>
						<tr>
							<th>タスク</th>
							<th>完了条件</th>
							<th>ポイント</th>
							<th>&nbsp;</th>
						</tr>
					</thead>

					@for(card <- box.iterator()){
					<tr>
						<td>@if(card.isDone()){<del>}@card.getFront()@if(card.isDone()){</del>}</td>
						<td>@if(card.isDone()){<del>}@card.getBack()@if(card.isDone()){</del>}</td>
						<td>@if(card.isDone()){<del>}@card.getPoints()@if(card.isDone()){</del>}</td>
						<td style="text-align: right;">
						@if(!card.isDone()){
							<form style="margin:0px;" method="POST" action="/cards/finished" enctype="application/x-www-form-urlencoded">
								<input type="hidden" name="cardId" value="@card.getIdentifier()" />
								<button type="submit" class="btn btn-success">Done</button>
							</form>
						}
						</td>
					</tr>
					}
				</table>
				}
				<p style="text-align:right;">
					Completed / Total : @box.getCompletedPoint() / @box.getTotalPoint()
				</p>
			</div>
			}
		</div>
	</div>
}